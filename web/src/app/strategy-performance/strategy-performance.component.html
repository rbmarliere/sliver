<p></p>

<div style="display: inline-block">
  Performance
  <div *ngIf="!loading" style="display: inline-block">
    <button mat-icon-button color="primary" (click)="getPositions()" title="Refresh Positions">
      <mat-icon fontIcon="refresh"></mat-icon>
    </button>
  </div>
</div>

<p></p>

<div class="main container">

  <mat-card appearance="outlined">
    <div *ngIf="loading" class="spinner">
      <mat-spinner></mat-spinner>
    </div>

    <mat-card-content class="main container">

      <div *ngIf="!loading && positions">
        <div *ngIf="positions.length == 0">
          <p>no positions found</p>
        </div>
        <pre *ngIf="positions.length > 0">
          {{ perf_log }}
        </pre>

        <table mat-table *ngIf="positions.length > 0" [dataSource]="positions" class="mat-elevation-z8 positions-table">
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef>id</th>
            <td mat-cell *matCellDef="let element">
              <a routerLink="/position/{{element.id}}">{{ element.id }}</a>
            </td>
          </ng-container>
          <ng-container matColumnDef="strategy_id">
            <th mat-header-cell *matHeaderCellDef>Strategy</th>
            <td mat-cell *matCellDef="let element">{{ element.strategy_id }}</td>
          </ng-container>
          <ng-container matColumnDef="market">
            <th mat-header-cell *matHeaderCellDef>Market</th>
            <td mat-cell *matCellDef="let element">{{ element.market }}</td>
          </ng-container>
          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef>Status</th>
            <td mat-cell *matCellDef="let element">{{ element.status }}</td>
          </ng-container>
          <ng-container matColumnDef="entry_amount">
            <th mat-header-cell *matHeaderCellDef>Entry Amount</th>
            <td mat-cell *matCellDef="let element">{{ element.entry_amount }}</td>
          </ng-container>
          <ng-container matColumnDef="entry_price">
            <th mat-header-cell *matHeaderCellDef>Entry Price</th>
            <td mat-cell *matCellDef="let element">{{ element.entry_price }}</td>
          </ng-container>
          <ng-container matColumnDef="exit_price">
            <th mat-header-cell *matHeaderCellDef>Exit Price</th>
            <td mat-cell *matCellDef="let element">{{ element.exit_price }}</td>
          </ng-container>
          <ng-container matColumnDef="exit_amount">
            <th mat-header-cell *matHeaderCellDef>Exit Amount</th>
            <td mat-cell *matCellDef="let element">{{ element.exit_amount }}</td>
          </ng-container>
          <ng-container matColumnDef="pnl">
            <th mat-header-cell *matHeaderCellDef>PnL</th>
            <td mat-cell *matCellDef="let element">{{ element.pnl }}</td>
          </ng-container>
          <ng-container matColumnDef="roi">
            <th mat-header-cell *matHeaderCellDef>ROI</th>
            <td mat-cell *matCellDef="let element">{{ element.roi }}%</td>
          </ng-container>
          <!-- <ng-container matColumnDef="actions"> -->
          <!--   <th mat-header-cell *matHeaderCellDef>Actions</th> -->
          <!--   <td mat-cell *matCellDef="let element"> -->
          <!--     <button mat-icon-button color="primary" routerLink="/position/{{ element.id }}"> -->
          <!--       <mat-icon class="icon-display" fontIcon="info"></mat-icon> -->
          <!--     </button> -->
          <!--   </td> -->
          <!-- </ng-container> -->

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>

      </div>

    </mat-card-content>
  </mat-card>

</div>
